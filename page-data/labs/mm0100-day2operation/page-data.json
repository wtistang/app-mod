{"componentChunkName":"component---src-pages-labs-mm-0100-day-2-operation-index-mdx","path":"/labs/mm0100-day2operation/","result":{"pageContext":{"frontmatter":{"title":"App Centric Management with Application Navigator","description":null},"relativePagePath":"/labs/mm0100-day2operation/index.mdx","titleType":"page","MdxNode":{"id":"b7db0ca8-82bd-57d1-9968-791add8e5519","children":[],"parent":"c88c58f0-753a-5b3e-9c19-08bdeedb5dc8","internal":{"content":"---\ntitle: App Centric Management with Application Navigator \ndescription: \n---\n\nHow to conduct “day 2 operations” in a hybrid cloud environment is one of the challenges customers are facing in their journey to the cloud, it is hard to quickly determine the root cause of an issue or to get the information needed to make decisions with too many views, tools and inconsistencies. IBM Cloud Pak for Applications provides tools and solutions to address such issues. Included in this Pak is IBM Application Navigator (**App Navigator**).  It is an app-centric management tool which compliments Red Hat OpenShift (OpenShift), by allowing you to visualize, inspect, and interact with the deployed resources that are comprised of hybrid and cloud native applications. App Navigator is a Kubernetes application that is designed to facilitate an app-centric management experience for cloud native and hybrid applications, across both cloud and traditional platforms. By providing a grouping and visualization capability for those deployed elements that comprise a business level application, combining with both kind-specific out-of-the-box and customizable actions, App Navigator enhances operational understanding and control through a simplified but powerful view of your applications.  It puts the tools you need most in context and at your fingertips and yields a superior user experience for applications that dramatically surpasses the infrastructure view that the Kubernetes platform consoles provide.\n\n### 1.\tBusiness Scenario\n\nYour company has started a project to break a big monolithic application into different components. Via IBM Cloud Transformation Advisor, you received the insight on how to modernize the application the best way. You replaced parts of the business functionality with new cloud native services and deployed them successfully to a Kubernetes cluster environment. In addition, you moved some application components to the light-weighted Liberty Collective environment. Unfortunately, you had to leave some of the complex JEE application components in the traditional existing WebSphere ND Cell infrastructure. So finally, you ended up with a hybrid application which runs across WAS Cell, Liberty Collectives and Containers. This makes it hard for the operations team to find out in an easy way if your application overall is running fine or not.  \n\nIn order to quickly determine the root cause of an issue and get the information needed to make decisions for the application across WAS Cell, Liberty Collectives and Containers, you want to use the App Navigator tool to as a single access point to view/navigate/interacts with the applications and their components.  \n\n  \n### 2.\tObjective\n\nThe objectives of this lab are to:\n*\tLearn how to deploy a cloud native application in a Kubernetes cluster\n*\tLearn how to configure WAS ND Cell with App Navigator\n*\tLearn how to configure Liberty Collective with App Navigator\n*\tLearn how to use App Navigator as an inspection tool to facilitate monitoring and problem determination for WAS ND, Liberty Collective and Kubernetes clusters.\n\n### 3.\tPrerequisites\nThe following prerequisites must be completed prior to beginning this lab:\n*\tFamiliarity with basic Linux commands\n*\tHave internet access\n*\tHave completed SU0010 of this lab series and have the CP4Apps installed in IBM Red Hat OpenShift Kubernetes Service (OCP) cluster on IBM Cloud\n\n\n### 4.\tWhat is Already Completed\n\nThe Workstation VM is pre-configured for you to access and work with the OCP cluster in this lab.\n\nThe login credentials for the Workstation VM are provided in your Reservation Details page (https://www.ibm.com/demos/my-reservations/).\n\nThe CLI commands used in this lab are listed in the Commands.txt file located at the **/home/ibmdemo/app-mod-labs/mm0100** directory of the Workstation VM for you to copy and paste these commands to the Terminal window during the lab.\n\n### 5.\tLab Tasks\nDuring this lab, you complete the following tasks:\n*\tDeploy a cloud native application\n*\tReview the cloud application in App Navigator\n*\tImport the WAS ND Cell to App Navigator\n*\tImport the Liberty Collective to App Navigator\n*\tTake actions with App Navigator\n*\tTroubleshot application issues\n\n### 6.\tExecute Lab Tasks\n\n#### 6.1 Log in to the Workstation VM and get started \n1.  Launch the VM from your local workstation web browser with the VM URL.\n \n    ![](images/vm-url.png)\n\n2.\tClick **Connect** to access the VM.\n \n    ![](images/vm-connect.png)\n\n3.\tEnter the password you obtained from the Reservation Details page and click **Send Password**.\n\n    ![](images/vm-password.png)\n\n    The VM desktop is displayed.\n\n    ![](images/vm-desktop.png)\n\n    The Workstation Desktop is displayed. You execute all the lab tasks on this VM.\n\n#### 6.2\tDeploy a Cloud Native Application to a Kubernetes cluster\n\nIn this task, you are going to deploy stocktrader, a sample cloud native application, to an OCP cluster using OpenShift command line. \n\n1.\tClick **Applications**>**Firefox** to launch the web browser.\n\n  ![](images/vm-browser-link.png)\n2.\tFrom the browser window, click OCP cluster Web Console bookmark to open it with your IBM credentials.\n\n  ![](images/ocp-console-bookmarked.png) \n3.\tIn the OpenShift Web Console page, click the **Action** icon next to your username and select **Copy Login** Command to get the OCP login command.\n\n  ![](images/ocp-copy-login-command.png) \n4.\tIn the next page, click **Display Token** link.\n\n  ![](images/display-token.png) \n5.\tCopy the OCP login command to the clipboard.\n\n  ![](images/copy-token.png) \n6.\tOpen a Terminal window by clicking **Applications**>**Terminal**.\n\n  ![](images/vm-terminal-link.png)\n7.  In the Terminal window right-click to paste the OCP login command window press Enter to log in to the OCP cluster.\n \n  ![](images/run-oc-login-command.png) \n8.\tAfter the login, create two new OpenShift projects (namespaces) as **demo** and **stocktrader**.\n\n  ```\n  oc new-project demo\n  oc new-project stocktrader\n  ```\n    the **demo** project and **stocktrader** project are now created.\n\n8.\tNavigate to **/home/ibmdemo/mm0100** directory with command:\n\n    ```\n    cd /home/ibmdemo/app-mod-labs/mm0100\n    ```\n\n9.  Deploy the **stock-trader** cloud native application to the **stocktrader** namespace with the following command: \n\n    ```\n    oc create -f samples/stocktrader -n stocktrader\n    ```\n \n  ![](images/oc-deploy-stocktrader-app.png)\n10.\tTo verify the deployment, go back to the OCP cluster Web Console Home page, click **Workload**>**Deployments** and select the **stocktrader** project.\n\n  ![](images/an-workloads-deployments-stocktrader.png)\n11.\tFrom the stocktrader project Overview page, you can see all the components of the application are deployed and running.\n \n  ![](images/an-stocker-trader-deployment.png) \n  \n  Once deployed, these cloud native applications are automatically added the App Navigator Applications List. You see later how you can visualize and inspect these cloud native applications with App Navigator.\n\n#### 6.3\tLaunch and View App Navigator\n\nThe App Navigator has been deployed to the OCP cluster as a part of the Cloud Pak for Application installation. You can access all its functions through its web UI.\n\n1.\tFrom the web browser window, click the App Navigator bookmark to launch it.\n\n  ![](images/an-bookmark.png)\n\n    The App Navigator **Home/Applications** page is displayed.\n\n  ![](images/an-applications-stock-trader.png)\n  \n    As you can see, The App Navigator **Home/Applications** page lists all Kubernetes applications deployed in all OCP Cluster namespaces.  Currently, the **stocktrader** application is listed.\n\n    Note: The stocktrader is a typical Kubernetes Application with a collection of loosely coupled, but related resources.  It is different from a traditional JEE application which is represented as a single resource.  A Kubernetes “Application” could be comprised of multiple JEE applications.  \n\n3.\tClick the Navigation menu icon on the top left corner of the page to access the function pages of the App Navigator.\n\n   ![](images/an-navigation-menu.png)\n\n   App Navigator has four function pages, including:\n    * Applications – let user to view and perform actions for Kubernetes applications and their related resource.\n    * Command Actions – provide a view of command action the user previously initiated.\n    * WAS ND Cell – allow user to add WAS ND Cells to App Navigator, to view and perform actions for JEE applications in these cells.\n    * Liberty Collective - allow user to add Liberty Collectives to App Navigator, to view and perform actions for JEE applications in these collectives.\n\n#### 6.4 Import a WAS ND cell into App Navigator\n\nIn this task, you learn to process import a WAS V9 ND cell into the App Navigator, this establishes visibility and access to the WAS cell from the App Navigator.  It creates a WAS-ND-Cell (twas-cell) Kubernetes custom resource to represent that cell. It also automatically discovers JEE applications deployed on that cell and creates WAS-Traditional-App (twas-apps) Kubernetes custom resources to represent them.  App Navigator periodically polls the cell to keep the state of the twas-cell and twas-apps in sync with the cell.  \n\nA WAS ND Cell can be imported into App Navigator via UI or CLI.  In this lab, you learn how to import a WAS ND cell via App Navigator UI. \n\nNote: The best practice is that all WAS cells should be imported into the same Kubernetes namespace.  \n\nIn order to import a WAS ND cell to App Navigator, the WAS ND cell should be in the same network as the OCP cluster. Due to the network constrain of the lab environment, a hypothetical WAS ND cell with the following settings is used here to show the import process:\n\n**Host IP**: 10.0.0.1\n\n**Admin Console URL**: https://10.0.0.1:9044/ibm/console\n\n**Username/password**: wsadmin/wsadmin\n\n1.\tFrom the App Navigator UI, click **Navigate**>**WAS ND Cells**. \n\n  ![](images/an-was-nd-cell-link.png)\n2.\tIn the WAS ND Cells page, click **Create WAS ND Cell** to add the local WAS ND cell resources to App Navigator.\n\n  ![](images/an-add-was-nd-cell.png)\n3.\tIn the **General** panel, enter the **Name** as **mywasndcell** for your WAS ND cell and select the **demo** namespace.\n\n  ![](images/an-create-was-nd-cell-general.png)\n\n    Note: The WAS ND Cell Name is a name you choose, it has to be a unique name within the same namespace on Kubernetes Cluster. It is not necessarily the same as the WAS Cell actual name, because many times that name is the default name and therefore is not unique among multiple cells.    \n\n4.\tClick **Endpoints**, enter the Host as **10.0.0.1** and change the Console URL port to **9044**.\n\n ![](images/an-create-was-nd-cell-endpoints.png)\n\n5.\tClick **Credentials**, accept the default, you need to create a secret setting, enter Username and Password as: **wsadmin**/**wsadmin**, confirm the password and click **Add**.\n \n  ![](images/an-create-was-nd-cell-credentials.png)\n \n  Your WAS ND cell resources have been created and the WAS ND cell info are starting to be imported to App Navigator.  Since you are using a hypothetical WAS ND cell, the WAS ND cell resources status changes from **Unknown** to **Problem**. In real situation, after the import is done, the WAS ND cell resources status turns from **Unknown** to **Normal**.\n\n  ![](images/an-was-nd-cell-added.png)\n\n#### 6.5\tImport a Liberty Collective Resources into App Navigator\n\nSimilarly, you can import a Liberty Collective into App Navigator establishes visibility and access to the collective from it.  It creates a Liberty-Collective Kubernetes custom resource to represent that collective. It also automatically discovers JEE applications deployed on that collective and creates Liberty-App Kubernetes custom resources to represent those.  App Navigator periodically polls the cell to keep the state of the Liberty-Collective and Liberty-Apps in sync with the collective.  \n\nNote: Best practice: all Liberty Collectives should be imported into the same Kubernetes namespace.  \n\nAgain, in order to import a Liberty Collective to App Navigator, the iberty Collective should be in the same network as the OCP cluster. Due to the network constrain of the lab environment, a hypothetical a Liberty Collective with the following settings is used here to show the import process:\n\n**Host IP**:\t10.0.0.1\n\n**Admin Console URL**:\thttps://10.0.0.1:9045/adminCenter\n\n**Username/password**:\tadmin/admin\n\n1.\tFrom the App Navigator UI, click **Navigate** > **Liberty Collectives** to go to the Liberty Collective page.\n\n  ![](images/an-liberty-collective-link.png)\n2.\tIn the Liberty Collective page, click **Create Liberty Collective** to add the local Liberty Collective resources to App Navigator.\n\n  ![](images/an-add-liberty-collective.png)\n\n3.\tIn the General panel, enter the **Name** as **mylibertycollective** for your Liberty Collective and select the **demo** namespace.\n\n  ![](images/an-create-liberty-collective-general.png) \n\n    Note: The Liberty Collective Name is a name you choose, it has to be a unique name within the same namespace on Kubernetes Cluster. It is not necessarily the same as the Liberty Collective actual name, because many times that name is the default name and therefore is not unique among multiple Liberty Collectives.    \n\n4.\tClick **Endpoints**, enter the Host as **10.0.0.1** and change the Console URL port to **9445**.\n\n  ![](images/an-create-liberty-collective-endpoints.png) \n5.\tClick **Credentials**, accept the default I need to create a secret setting, enter Username and Password as: **admin**/**admin**, confirm the password and click **Add**.\n\n  ![](images/an-create-liberty-collective-credentials.png)\n\n    Your Liberty Collective resources have been created and the Collective info are starting to be imported to App Navigator.  Since you are using a hypothetical Liberty Collective, the Liberty Collective resources status changes from **Unknown** to **Problem**. In real situation, after the import is done, the Liberty Collective resources status turns from **Unknown** to **Normal**.\n\n  ![](images/an-liberty-collective-added.png)\n### 6.6\tTake actions with App Navigator (Reviewing Only)\n\nIn this section, you learn how to perform App Navigator actions.\n\nNote:  Since you are using the hypothetical WAS ND cell and Liberty Collective in the lab environment, you cannot perform any App Navigator actions against **mywasndcell** and **mylibertycollectibe** you added in the step above. These Action processes presented in this section are for your reference only. If you want to have a hands-on experience on how to execute these actions, you can run the **MM0100ST** lab in [BludDemo2459](https://bluedemos.com/show/2459).\n\nThe App Navigator provides context sensitive actions that you can perform on Kubernetes resources. In this task, you select an application component and perform an action.  \n\nThe available actions in App Navigator are listed below:\n\n### Kind-**Action**-Description\n* Application-**Edit**-Edit the JSON resource\n* Application-**Remove**-Delete the application from the cluster.\n* Application-**Detail**-Hyperlink to detail page.\n* Deployment-**Detail**-Hyperlink to detail page.\n* Deployment.Liberty-**View Metrics**-View the Liberty Grafana dashboard.\n* Deployment.Liberty-**View Kibana Logs**-View the Liberty Kibana dashboard for containers.\n* Deployment.tWAS-**View**-Kibana Logs\tFor WebSphere Application Server traditional, view the Kibana dashboard for containers.\n* Ingress\tDetail-**Hyperlink**-to detail page.\n* Job\tDetail-**Hyperlink**-to detail page.\n* Liberty-App-**Detail**-Hyperlink to detail page.\n* Liberty-App-**Edit**-Edit the JSON resource.\n* Liberty-App-**Access Admin Center**-Open the Liberty Admin Center home page**.\n* Liberty-App-**View Kibana Logs**-View the Liberty Kibana dashboard for virtual machines (VMs).\n* Pod\tDetail-**Hyperlink**-to detail page.\n* Service-**Detail**-Hyperlink to detail page.\n* tWAS-App-**Detail**-Hyperlink to detail page.\n* tWAS-App-**Edit**-Edit the JSON resource.\n* tWAS-App-**Access Admin Console**-Open WAS Admin Console home page.\n* tWAS-App-**View Kibana Logs**-For WebSphere Application Server traditional, view Kibana dashboard for VMs.\n* tWAS-App-**Set Trace**-Set a trace string for WebSphere Application Server traditional servers.\n\n\n1.\tExecute actions for tWAS-App (Do not run any tasks in this step).\n\n  After the WAS ND Cells and the Liberty Collectives are added and their status are **Normal**, you can perform the following App Navigator Action tasks to it.   \n  \n  a.\tIn the App navigator page, click **Navigation Menu**>**WAS ND Cells**.\n  \n  b.\tClick Action context menu of the **mywasndcell** and select **Edit**.\n\n  ![](images/an-was-nd-cell-edit-action.png)\n\n    As you can see, you use the Edit action to make changes to configure JSON object to add label and annotations of the WAS ND Cell. The purpose of editing the WAS/Liberty JSON object is to follow the philosophy of the OCP cluster console, which gives you edit access to the JSON for all objects.  \n  \n  ![](images/an-edit-was-nd-cell.png)\n\n  d.\tGo back to the App Navigator page and click the **mywasndcell** link to access the **mywasndcell** detail page which contains the WAS cell details info and all JEE applications deployed to the cell.\n\n  ![](images/an-was-nd-cell-details.png)\n\n  e.\tClick the Action context menu of the **query** JEE application, you can see the actions available for the application, including editing the JSON object of the application, accessing WAS Admin Console, viewing Kibana log and setting application trace.\n \n  ![](images/an-was-nd-cell-app-actions.png)\n  \n  As you can see from the application list, all four JEE applications are not associated with the stocktrader Kubernetes Application and they are not show up in the stocktrader Application list, this is because that none of these JEE applications are represented as part of any Kubernetes Application by default. \n\n  To represent any JEE applications as a part of a Kubernetes Application, they must be assigned using a two-part formula: \n\n  *\tAdd a resource kind to componentsKinds list of chosen Kubernetes Application\n  *\tAdd a label to resource instance that matches the chosen Kubernetes Application’s label selector. \n\n  If you pretend that the query JEE application is a component application of stocktrader, you can use the Edition Action to modify its JSON object and label it as the stocktrader application.  Then you add the resource kind of the query JEE application to stocktrader application JSON object. Once you do that, the query application is added to the stocktrader application list.\n\n  f.\tClick the Edit Action of the query application, add \"solution\": \"stock-trader\", string to its JSON object and save the change. Make sure that you add \",\" in the end of the string.\n\n  ```\n  \"solution\": \"stock-trader\",\n  ```\n  ![](images/an-was-nd-cell-query-edit.png)\n  \n  g.\tClick the query application Name link to view its detail info.  You can see the new label you just added is displayed.\n\n  ![](images/an-was-nd-cell-app-details.png)\n\n  h.\tNext, go back to the App Navigator **Applications** page and click **Edit** action from the **stocktrader** application Action Context Menu.\n\n  ![](images/an-stock-trader-app-edit-action.png)\n\n  i.\t First add a special annotation for the WAS ND Cell namespace as \"kappnav.component.namespaces\": \"demo\", to the JSON object. Make sure that you add \",\" in the end of the string.\n\n  ```\n  \"kappnav.component.namespaces\": \"demo\",\n  ```\n\n  ![](images/an-app-edit.png)\n\n  j.\tAdd a new componentKinds group with legacy group name and WAS-Traditional-App kind to the JSON object and click Save to save the change.\n\n  ```\n  {\n    \"group\": \"legacy\",\n    \"kind\": \"WAS-Traditional-App\"\n  },\n  ```\n  ![](images/an-app-edit-2.png)\n\n  k.\tNow click the stocktrader Application Name link to view its details.\n\n  ![](images/an-stock-trader-link.png)\n\n  You see that the query JEE application is showing in the Application list.\n \n  ![](images/an-stock-trader-app-details.png)\n\n2.\tExecute actions for the Liberty Collective App (do not run any tasks in this step).\n  \n  a.\tIn the App Navigator page, click **Navigation**>**Liberty Collectives**.\n  \n  b.\tClick Action context menu of the **mylibertycollective** and select **Edit**.\n    \n  c.\tAs you can see, you can use the Edit action to make changes to configure JSON object. But in this lab, you are just viewing the contents of the object, so click Cancel to close the window.\n  \n  d.\tClick the mylibertycollective link to access the mylibertycollective page.\n\n  e.\tClick the Action context menu of the **PlantsByWebSphere** JEE application, you can see the actions you can use for the application, including editing the JSON object of the application, accessing Liberty Collective Admin Center and viewing Kibana log.\n \n  ![](images/an-liberty-app-edit-action.png)\n\n  Again, if you pretend that the **PlantsByWebSphereV8** JEE application is another component application of stocktrader, you can follow the same approach as you did for the query JEE Application in WAS ND Cell case to add it to the stocktrader application list.\n\n  f.\tClick the Edit Action of the **PlantsByWebSphereV8** application, add \"solution\": \"stock-trader\", string to its JSON object and save the change. Make sure that you add \",\" in the end of the string.\n\n  ```\n  \"solution\": \"stock-trader\",\n  ```\n \n  ![](images/an-edit-liberty-app.png)\n\n  g.\tClick the **PlantsByWebSphereV8** application Name link to view its detail info.  You can see the new label you just added is displayed.\n  \n  h.\tNext, go back to the App Navigator **Applications** page and click **Edit** action from the stocktrader application Action context menu.\n\n  i.\tAdd a new componentKinds group with legacy group name and Liberty-App kind to the JSON object and click Save to save the change.\n\n  ```\n  {\n    \"group\": \"legacy\",\n    \"kind\": \"Liberty-App\"\n  },\n  ```\n  ![](images/an-app-edit-3.png)\n  j.\tAfter the change, click the **stocktrader** application link, you see that the PlantsByWebSphereV8 application is showing in the Application list.\n\n  ![](images/an-stock-trader-app-details-2.png)\n3.\tExecute actions for the Cloud Deployment\n\n    a.\tIn the App Navigator page, click **Navigation**>**Applications**.\n\n    b.\tClick the **stock-trader** link to access the **stock-trader** application page.\n\n    c.\tClick the Action context menu of the loyalty-level deployment pod, you can see a list of available actions. For example, if you take an action **View Replicas**, clicking the link takes you to OCP cluster **Workloads**>**Replica Sets** page of that application.\n    \n    ![](images/an-loyalty-level-actions.png)\n    d.\tClick any of the cloud native application Name link, it takes you to either ROSK cluster **Workloads**>**Deployments** page or **Networking**/**Services** page of that application, depending on the application Kind.\n\n#### 6.7\tTroubleshooting Applications Issues\n\nNaturally, in a production environment, application status is monitored by Application Performance Management (APM) tools. If the deployed applications and components are running into issues, APM automation process takes care most of the issues and the responsible party is notified if manual intervention is required. When the manual intervention is required, the App Navigators status indicators help direct the user immediately to the affected component and provides in-context access to relevant tools.\n\nIn this section, you simulate an application error using the loyalty-level application and setting its pod to 0. After the setting change, the loyalty-level application stops running.  You learn how you can recognize the error in App Navigator, be able to easily drill down to identify the issue and make a decision how to address it. \n \n1.\tGo back to the OCP cluster Web Console page, click **Workloads**>**Deployments** and select **stocktrader** project.\n\n  ![](images/an-workloads-deployments-stocktrader.png)\n2.\tClick **loyalty-level** application deployment link.\n\n  ![](images/an-deployment-loyalty-level.png)\n3.\tFrom the **loyalty-level** application deployment page, click **Actions**>**Edit Count**.\n\n  ![](images/an-loyalty-level-action.png)\n4.\tSet the pod number to **0** and click **Save**.\n\n  ![](images/an-edit-count.png)\n5.\tNow the loyalty-level application is down. Assuming this error is detected by the APM system, but cannot be corrected automatically.  You received a notification and need to investigate manually. You open the App Navigator Applications page, you see that you do have an issue with the stocktrader application. Click the Application Name link to drill into it.\n\n  ![](images/an-applications-warning.png)\n\n  You see that you have a problem with the loyalty-level application deployment.\n\n  ![](images/an-loyalty-level-warning.png)\n6.\tClick the loyalty-level application deployment Name link to drill down, you are taken to the OCP cluster **Workloads**>**Deployments** page of the loyalty-level application and you can see that the problem is that there is no pod available.\n\n  ![](images/an-loyalty-level-deployment-overview.png)\n7.\tTo fix the issue, click **Actions**>**Edit Count**, set the pod number back to **1** and save the change.\n8.\tSwitch back to the App Navigator Application view and you see in a moment that the status color of stocktrader application goes from red to green and the loyalty-levels application is back up and running. The problem has been solved. \n\n### 7.\tSummary\n\nIn this lab, you have learned how to use IBM App Navigator tool to inspect your applications on-prem and in cloud. App Navigator enhances operational understanding and control through a simplified but powerful view of your applications, allows you to easily view/navigate/interacts with the applications and their components.\nTo learn more about IBM App Modernization solutions and Cloud Pak for Application capabilities, please visit [Cloud Pak for Applications](https://www.ibm.com/cloud/cloud-pak-for-applications).\n\nCongratulations! You have successfully completed the lab “App Centric Management with Application Navigator”\n","type":"Mdx","contentDigest":"bb201faf93508e6e8565ad181187d38e","owner":"gatsby-plugin-mdx","counter":2869},"frontmatter":{"title":"App Centric Management with Application Navigator","description":null},"exports":{},"rawBody":"---\ntitle: App Centric Management with Application Navigator \ndescription: \n---\n\nHow to conduct “day 2 operations” in a hybrid cloud environment is one of the challenges customers are facing in their journey to the cloud, it is hard to quickly determine the root cause of an issue or to get the information needed to make decisions with too many views, tools and inconsistencies. IBM Cloud Pak for Applications provides tools and solutions to address such issues. Included in this Pak is IBM Application Navigator (**App Navigator**).  It is an app-centric management tool which compliments Red Hat OpenShift (OpenShift), by allowing you to visualize, inspect, and interact with the deployed resources that are comprised of hybrid and cloud native applications. App Navigator is a Kubernetes application that is designed to facilitate an app-centric management experience for cloud native and hybrid applications, across both cloud and traditional platforms. By providing a grouping and visualization capability for those deployed elements that comprise a business level application, combining with both kind-specific out-of-the-box and customizable actions, App Navigator enhances operational understanding and control through a simplified but powerful view of your applications.  It puts the tools you need most in context and at your fingertips and yields a superior user experience for applications that dramatically surpasses the infrastructure view that the Kubernetes platform consoles provide.\n\n### 1.\tBusiness Scenario\n\nYour company has started a project to break a big monolithic application into different components. Via IBM Cloud Transformation Advisor, you received the insight on how to modernize the application the best way. You replaced parts of the business functionality with new cloud native services and deployed them successfully to a Kubernetes cluster environment. In addition, you moved some application components to the light-weighted Liberty Collective environment. Unfortunately, you had to leave some of the complex JEE application components in the traditional existing WebSphere ND Cell infrastructure. So finally, you ended up with a hybrid application which runs across WAS Cell, Liberty Collectives and Containers. This makes it hard for the operations team to find out in an easy way if your application overall is running fine or not.  \n\nIn order to quickly determine the root cause of an issue and get the information needed to make decisions for the application across WAS Cell, Liberty Collectives and Containers, you want to use the App Navigator tool to as a single access point to view/navigate/interacts with the applications and their components.  \n\n  \n### 2.\tObjective\n\nThe objectives of this lab are to:\n*\tLearn how to deploy a cloud native application in a Kubernetes cluster\n*\tLearn how to configure WAS ND Cell with App Navigator\n*\tLearn how to configure Liberty Collective with App Navigator\n*\tLearn how to use App Navigator as an inspection tool to facilitate monitoring and problem determination for WAS ND, Liberty Collective and Kubernetes clusters.\n\n### 3.\tPrerequisites\nThe following prerequisites must be completed prior to beginning this lab:\n*\tFamiliarity with basic Linux commands\n*\tHave internet access\n*\tHave completed SU0010 of this lab series and have the CP4Apps installed in IBM Red Hat OpenShift Kubernetes Service (OCP) cluster on IBM Cloud\n\n\n### 4.\tWhat is Already Completed\n\nThe Workstation VM is pre-configured for you to access and work with the OCP cluster in this lab.\n\nThe login credentials for the Workstation VM are provided in your Reservation Details page (https://www.ibm.com/demos/my-reservations/).\n\nThe CLI commands used in this lab are listed in the Commands.txt file located at the **/home/ibmdemo/app-mod-labs/mm0100** directory of the Workstation VM for you to copy and paste these commands to the Terminal window during the lab.\n\n### 5.\tLab Tasks\nDuring this lab, you complete the following tasks:\n*\tDeploy a cloud native application\n*\tReview the cloud application in App Navigator\n*\tImport the WAS ND Cell to App Navigator\n*\tImport the Liberty Collective to App Navigator\n*\tTake actions with App Navigator\n*\tTroubleshot application issues\n\n### 6.\tExecute Lab Tasks\n\n#### 6.1 Log in to the Workstation VM and get started \n1.  Launch the VM from your local workstation web browser with the VM URL.\n \n    ![](images/vm-url.png)\n\n2.\tClick **Connect** to access the VM.\n \n    ![](images/vm-connect.png)\n\n3.\tEnter the password you obtained from the Reservation Details page and click **Send Password**.\n\n    ![](images/vm-password.png)\n\n    The VM desktop is displayed.\n\n    ![](images/vm-desktop.png)\n\n    The Workstation Desktop is displayed. You execute all the lab tasks on this VM.\n\n#### 6.2\tDeploy a Cloud Native Application to a Kubernetes cluster\n\nIn this task, you are going to deploy stocktrader, a sample cloud native application, to an OCP cluster using OpenShift command line. \n\n1.\tClick **Applications**>**Firefox** to launch the web browser.\n\n  ![](images/vm-browser-link.png)\n2.\tFrom the browser window, click OCP cluster Web Console bookmark to open it with your IBM credentials.\n\n  ![](images/ocp-console-bookmarked.png) \n3.\tIn the OpenShift Web Console page, click the **Action** icon next to your username and select **Copy Login** Command to get the OCP login command.\n\n  ![](images/ocp-copy-login-command.png) \n4.\tIn the next page, click **Display Token** link.\n\n  ![](images/display-token.png) \n5.\tCopy the OCP login command to the clipboard.\n\n  ![](images/copy-token.png) \n6.\tOpen a Terminal window by clicking **Applications**>**Terminal**.\n\n  ![](images/vm-terminal-link.png)\n7.  In the Terminal window right-click to paste the OCP login command window press Enter to log in to the OCP cluster.\n \n  ![](images/run-oc-login-command.png) \n8.\tAfter the login, create two new OpenShift projects (namespaces) as **demo** and **stocktrader**.\n\n  ```\n  oc new-project demo\n  oc new-project stocktrader\n  ```\n    the **demo** project and **stocktrader** project are now created.\n\n8.\tNavigate to **/home/ibmdemo/mm0100** directory with command:\n\n    ```\n    cd /home/ibmdemo/app-mod-labs/mm0100\n    ```\n\n9.  Deploy the **stock-trader** cloud native application to the **stocktrader** namespace with the following command: \n\n    ```\n    oc create -f samples/stocktrader -n stocktrader\n    ```\n \n  ![](images/oc-deploy-stocktrader-app.png)\n10.\tTo verify the deployment, go back to the OCP cluster Web Console Home page, click **Workload**>**Deployments** and select the **stocktrader** project.\n\n  ![](images/an-workloads-deployments-stocktrader.png)\n11.\tFrom the stocktrader project Overview page, you can see all the components of the application are deployed and running.\n \n  ![](images/an-stocker-trader-deployment.png) \n  \n  Once deployed, these cloud native applications are automatically added the App Navigator Applications List. You see later how you can visualize and inspect these cloud native applications with App Navigator.\n\n#### 6.3\tLaunch and View App Navigator\n\nThe App Navigator has been deployed to the OCP cluster as a part of the Cloud Pak for Application installation. You can access all its functions through its web UI.\n\n1.\tFrom the web browser window, click the App Navigator bookmark to launch it.\n\n  ![](images/an-bookmark.png)\n\n    The App Navigator **Home/Applications** page is displayed.\n\n  ![](images/an-applications-stock-trader.png)\n  \n    As you can see, The App Navigator **Home/Applications** page lists all Kubernetes applications deployed in all OCP Cluster namespaces.  Currently, the **stocktrader** application is listed.\n\n    Note: The stocktrader is a typical Kubernetes Application with a collection of loosely coupled, but related resources.  It is different from a traditional JEE application which is represented as a single resource.  A Kubernetes “Application” could be comprised of multiple JEE applications.  \n\n3.\tClick the Navigation menu icon on the top left corner of the page to access the function pages of the App Navigator.\n\n   ![](images/an-navigation-menu.png)\n\n   App Navigator has four function pages, including:\n    * Applications – let user to view and perform actions for Kubernetes applications and their related resource.\n    * Command Actions – provide a view of command action the user previously initiated.\n    * WAS ND Cell – allow user to add WAS ND Cells to App Navigator, to view and perform actions for JEE applications in these cells.\n    * Liberty Collective - allow user to add Liberty Collectives to App Navigator, to view and perform actions for JEE applications in these collectives.\n\n#### 6.4 Import a WAS ND cell into App Navigator\n\nIn this task, you learn to process import a WAS V9 ND cell into the App Navigator, this establishes visibility and access to the WAS cell from the App Navigator.  It creates a WAS-ND-Cell (twas-cell) Kubernetes custom resource to represent that cell. It also automatically discovers JEE applications deployed on that cell and creates WAS-Traditional-App (twas-apps) Kubernetes custom resources to represent them.  App Navigator periodically polls the cell to keep the state of the twas-cell and twas-apps in sync with the cell.  \n\nA WAS ND Cell can be imported into App Navigator via UI or CLI.  In this lab, you learn how to import a WAS ND cell via App Navigator UI. \n\nNote: The best practice is that all WAS cells should be imported into the same Kubernetes namespace.  \n\nIn order to import a WAS ND cell to App Navigator, the WAS ND cell should be in the same network as the OCP cluster. Due to the network constrain of the lab environment, a hypothetical WAS ND cell with the following settings is used here to show the import process:\n\n**Host IP**: 10.0.0.1\n\n**Admin Console URL**: https://10.0.0.1:9044/ibm/console\n\n**Username/password**: wsadmin/wsadmin\n\n1.\tFrom the App Navigator UI, click **Navigate**>**WAS ND Cells**. \n\n  ![](images/an-was-nd-cell-link.png)\n2.\tIn the WAS ND Cells page, click **Create WAS ND Cell** to add the local WAS ND cell resources to App Navigator.\n\n  ![](images/an-add-was-nd-cell.png)\n3.\tIn the **General** panel, enter the **Name** as **mywasndcell** for your WAS ND cell and select the **demo** namespace.\n\n  ![](images/an-create-was-nd-cell-general.png)\n\n    Note: The WAS ND Cell Name is a name you choose, it has to be a unique name within the same namespace on Kubernetes Cluster. It is not necessarily the same as the WAS Cell actual name, because many times that name is the default name and therefore is not unique among multiple cells.    \n\n4.\tClick **Endpoints**, enter the Host as **10.0.0.1** and change the Console URL port to **9044**.\n\n ![](images/an-create-was-nd-cell-endpoints.png)\n\n5.\tClick **Credentials**, accept the default, you need to create a secret setting, enter Username and Password as: **wsadmin**/**wsadmin**, confirm the password and click **Add**.\n \n  ![](images/an-create-was-nd-cell-credentials.png)\n \n  Your WAS ND cell resources have been created and the WAS ND cell info are starting to be imported to App Navigator.  Since you are using a hypothetical WAS ND cell, the WAS ND cell resources status changes from **Unknown** to **Problem**. In real situation, after the import is done, the WAS ND cell resources status turns from **Unknown** to **Normal**.\n\n  ![](images/an-was-nd-cell-added.png)\n\n#### 6.5\tImport a Liberty Collective Resources into App Navigator\n\nSimilarly, you can import a Liberty Collective into App Navigator establishes visibility and access to the collective from it.  It creates a Liberty-Collective Kubernetes custom resource to represent that collective. It also automatically discovers JEE applications deployed on that collective and creates Liberty-App Kubernetes custom resources to represent those.  App Navigator periodically polls the cell to keep the state of the Liberty-Collective and Liberty-Apps in sync with the collective.  \n\nNote: Best practice: all Liberty Collectives should be imported into the same Kubernetes namespace.  \n\nAgain, in order to import a Liberty Collective to App Navigator, the iberty Collective should be in the same network as the OCP cluster. Due to the network constrain of the lab environment, a hypothetical a Liberty Collective with the following settings is used here to show the import process:\n\n**Host IP**:\t10.0.0.1\n\n**Admin Console URL**:\thttps://10.0.0.1:9045/adminCenter\n\n**Username/password**:\tadmin/admin\n\n1.\tFrom the App Navigator UI, click **Navigate** > **Liberty Collectives** to go to the Liberty Collective page.\n\n  ![](images/an-liberty-collective-link.png)\n2.\tIn the Liberty Collective page, click **Create Liberty Collective** to add the local Liberty Collective resources to App Navigator.\n\n  ![](images/an-add-liberty-collective.png)\n\n3.\tIn the General panel, enter the **Name** as **mylibertycollective** for your Liberty Collective and select the **demo** namespace.\n\n  ![](images/an-create-liberty-collective-general.png) \n\n    Note: The Liberty Collective Name is a name you choose, it has to be a unique name within the same namespace on Kubernetes Cluster. It is not necessarily the same as the Liberty Collective actual name, because many times that name is the default name and therefore is not unique among multiple Liberty Collectives.    \n\n4.\tClick **Endpoints**, enter the Host as **10.0.0.1** and change the Console URL port to **9445**.\n\n  ![](images/an-create-liberty-collective-endpoints.png) \n5.\tClick **Credentials**, accept the default I need to create a secret setting, enter Username and Password as: **admin**/**admin**, confirm the password and click **Add**.\n\n  ![](images/an-create-liberty-collective-credentials.png)\n\n    Your Liberty Collective resources have been created and the Collective info are starting to be imported to App Navigator.  Since you are using a hypothetical Liberty Collective, the Liberty Collective resources status changes from **Unknown** to **Problem**. In real situation, after the import is done, the Liberty Collective resources status turns from **Unknown** to **Normal**.\n\n  ![](images/an-liberty-collective-added.png)\n### 6.6\tTake actions with App Navigator (Reviewing Only)\n\nIn this section, you learn how to perform App Navigator actions.\n\nNote:  Since you are using the hypothetical WAS ND cell and Liberty Collective in the lab environment, you cannot perform any App Navigator actions against **mywasndcell** and **mylibertycollectibe** you added in the step above. These Action processes presented in this section are for your reference only. If you want to have a hands-on experience on how to execute these actions, you can run the **MM0100ST** lab in [BludDemo2459](https://bluedemos.com/show/2459).\n\nThe App Navigator provides context sensitive actions that you can perform on Kubernetes resources. In this task, you select an application component and perform an action.  \n\nThe available actions in App Navigator are listed below:\n\n### Kind-**Action**-Description\n* Application-**Edit**-Edit the JSON resource\n* Application-**Remove**-Delete the application from the cluster.\n* Application-**Detail**-Hyperlink to detail page.\n* Deployment-**Detail**-Hyperlink to detail page.\n* Deployment.Liberty-**View Metrics**-View the Liberty Grafana dashboard.\n* Deployment.Liberty-**View Kibana Logs**-View the Liberty Kibana dashboard for containers.\n* Deployment.tWAS-**View**-Kibana Logs\tFor WebSphere Application Server traditional, view the Kibana dashboard for containers.\n* Ingress\tDetail-**Hyperlink**-to detail page.\n* Job\tDetail-**Hyperlink**-to detail page.\n* Liberty-App-**Detail**-Hyperlink to detail page.\n* Liberty-App-**Edit**-Edit the JSON resource.\n* Liberty-App-**Access Admin Center**-Open the Liberty Admin Center home page**.\n* Liberty-App-**View Kibana Logs**-View the Liberty Kibana dashboard for virtual machines (VMs).\n* Pod\tDetail-**Hyperlink**-to detail page.\n* Service-**Detail**-Hyperlink to detail page.\n* tWAS-App-**Detail**-Hyperlink to detail page.\n* tWAS-App-**Edit**-Edit the JSON resource.\n* tWAS-App-**Access Admin Console**-Open WAS Admin Console home page.\n* tWAS-App-**View Kibana Logs**-For WebSphere Application Server traditional, view Kibana dashboard for VMs.\n* tWAS-App-**Set Trace**-Set a trace string for WebSphere Application Server traditional servers.\n\n\n1.\tExecute actions for tWAS-App (Do not run any tasks in this step).\n\n  After the WAS ND Cells and the Liberty Collectives are added and their status are **Normal**, you can perform the following App Navigator Action tasks to it.   \n  \n  a.\tIn the App navigator page, click **Navigation Menu**>**WAS ND Cells**.\n  \n  b.\tClick Action context menu of the **mywasndcell** and select **Edit**.\n\n  ![](images/an-was-nd-cell-edit-action.png)\n\n    As you can see, you use the Edit action to make changes to configure JSON object to add label and annotations of the WAS ND Cell. The purpose of editing the WAS/Liberty JSON object is to follow the philosophy of the OCP cluster console, which gives you edit access to the JSON for all objects.  \n  \n  ![](images/an-edit-was-nd-cell.png)\n\n  d.\tGo back to the App Navigator page and click the **mywasndcell** link to access the **mywasndcell** detail page which contains the WAS cell details info and all JEE applications deployed to the cell.\n\n  ![](images/an-was-nd-cell-details.png)\n\n  e.\tClick the Action context menu of the **query** JEE application, you can see the actions available for the application, including editing the JSON object of the application, accessing WAS Admin Console, viewing Kibana log and setting application trace.\n \n  ![](images/an-was-nd-cell-app-actions.png)\n  \n  As you can see from the application list, all four JEE applications are not associated with the stocktrader Kubernetes Application and they are not show up in the stocktrader Application list, this is because that none of these JEE applications are represented as part of any Kubernetes Application by default. \n\n  To represent any JEE applications as a part of a Kubernetes Application, they must be assigned using a two-part formula: \n\n  *\tAdd a resource kind to componentsKinds list of chosen Kubernetes Application\n  *\tAdd a label to resource instance that matches the chosen Kubernetes Application’s label selector. \n\n  If you pretend that the query JEE application is a component application of stocktrader, you can use the Edition Action to modify its JSON object and label it as the stocktrader application.  Then you add the resource kind of the query JEE application to stocktrader application JSON object. Once you do that, the query application is added to the stocktrader application list.\n\n  f.\tClick the Edit Action of the query application, add \"solution\": \"stock-trader\", string to its JSON object and save the change. Make sure that you add \",\" in the end of the string.\n\n  ```\n  \"solution\": \"stock-trader\",\n  ```\n  ![](images/an-was-nd-cell-query-edit.png)\n  \n  g.\tClick the query application Name link to view its detail info.  You can see the new label you just added is displayed.\n\n  ![](images/an-was-nd-cell-app-details.png)\n\n  h.\tNext, go back to the App Navigator **Applications** page and click **Edit** action from the **stocktrader** application Action Context Menu.\n\n  ![](images/an-stock-trader-app-edit-action.png)\n\n  i.\t First add a special annotation for the WAS ND Cell namespace as \"kappnav.component.namespaces\": \"demo\", to the JSON object. Make sure that you add \",\" in the end of the string.\n\n  ```\n  \"kappnav.component.namespaces\": \"demo\",\n  ```\n\n  ![](images/an-app-edit.png)\n\n  j.\tAdd a new componentKinds group with legacy group name and WAS-Traditional-App kind to the JSON object and click Save to save the change.\n\n  ```\n  {\n    \"group\": \"legacy\",\n    \"kind\": \"WAS-Traditional-App\"\n  },\n  ```\n  ![](images/an-app-edit-2.png)\n\n  k.\tNow click the stocktrader Application Name link to view its details.\n\n  ![](images/an-stock-trader-link.png)\n\n  You see that the query JEE application is showing in the Application list.\n \n  ![](images/an-stock-trader-app-details.png)\n\n2.\tExecute actions for the Liberty Collective App (do not run any tasks in this step).\n  \n  a.\tIn the App Navigator page, click **Navigation**>**Liberty Collectives**.\n  \n  b.\tClick Action context menu of the **mylibertycollective** and select **Edit**.\n    \n  c.\tAs you can see, you can use the Edit action to make changes to configure JSON object. But in this lab, you are just viewing the contents of the object, so click Cancel to close the window.\n  \n  d.\tClick the mylibertycollective link to access the mylibertycollective page.\n\n  e.\tClick the Action context menu of the **PlantsByWebSphere** JEE application, you can see the actions you can use for the application, including editing the JSON object of the application, accessing Liberty Collective Admin Center and viewing Kibana log.\n \n  ![](images/an-liberty-app-edit-action.png)\n\n  Again, if you pretend that the **PlantsByWebSphereV8** JEE application is another component application of stocktrader, you can follow the same approach as you did for the query JEE Application in WAS ND Cell case to add it to the stocktrader application list.\n\n  f.\tClick the Edit Action of the **PlantsByWebSphereV8** application, add \"solution\": \"stock-trader\", string to its JSON object and save the change. Make sure that you add \",\" in the end of the string.\n\n  ```\n  \"solution\": \"stock-trader\",\n  ```\n \n  ![](images/an-edit-liberty-app.png)\n\n  g.\tClick the **PlantsByWebSphereV8** application Name link to view its detail info.  You can see the new label you just added is displayed.\n  \n  h.\tNext, go back to the App Navigator **Applications** page and click **Edit** action from the stocktrader application Action context menu.\n\n  i.\tAdd a new componentKinds group with legacy group name and Liberty-App kind to the JSON object and click Save to save the change.\n\n  ```\n  {\n    \"group\": \"legacy\",\n    \"kind\": \"Liberty-App\"\n  },\n  ```\n  ![](images/an-app-edit-3.png)\n  j.\tAfter the change, click the **stocktrader** application link, you see that the PlantsByWebSphereV8 application is showing in the Application list.\n\n  ![](images/an-stock-trader-app-details-2.png)\n3.\tExecute actions for the Cloud Deployment\n\n    a.\tIn the App Navigator page, click **Navigation**>**Applications**.\n\n    b.\tClick the **stock-trader** link to access the **stock-trader** application page.\n\n    c.\tClick the Action context menu of the loyalty-level deployment pod, you can see a list of available actions. For example, if you take an action **View Replicas**, clicking the link takes you to OCP cluster **Workloads**>**Replica Sets** page of that application.\n    \n    ![](images/an-loyalty-level-actions.png)\n    d.\tClick any of the cloud native application Name link, it takes you to either ROSK cluster **Workloads**>**Deployments** page or **Networking**/**Services** page of that application, depending on the application Kind.\n\n#### 6.7\tTroubleshooting Applications Issues\n\nNaturally, in a production environment, application status is monitored by Application Performance Management (APM) tools. If the deployed applications and components are running into issues, APM automation process takes care most of the issues and the responsible party is notified if manual intervention is required. When the manual intervention is required, the App Navigators status indicators help direct the user immediately to the affected component and provides in-context access to relevant tools.\n\nIn this section, you simulate an application error using the loyalty-level application and setting its pod to 0. After the setting change, the loyalty-level application stops running.  You learn how you can recognize the error in App Navigator, be able to easily drill down to identify the issue and make a decision how to address it. \n \n1.\tGo back to the OCP cluster Web Console page, click **Workloads**>**Deployments** and select **stocktrader** project.\n\n  ![](images/an-workloads-deployments-stocktrader.png)\n2.\tClick **loyalty-level** application deployment link.\n\n  ![](images/an-deployment-loyalty-level.png)\n3.\tFrom the **loyalty-level** application deployment page, click **Actions**>**Edit Count**.\n\n  ![](images/an-loyalty-level-action.png)\n4.\tSet the pod number to **0** and click **Save**.\n\n  ![](images/an-edit-count.png)\n5.\tNow the loyalty-level application is down. Assuming this error is detected by the APM system, but cannot be corrected automatically.  You received a notification and need to investigate manually. You open the App Navigator Applications page, you see that you do have an issue with the stocktrader application. Click the Application Name link to drill into it.\n\n  ![](images/an-applications-warning.png)\n\n  You see that you have a problem with the loyalty-level application deployment.\n\n  ![](images/an-loyalty-level-warning.png)\n6.\tClick the loyalty-level application deployment Name link to drill down, you are taken to the OCP cluster **Workloads**>**Deployments** page of the loyalty-level application and you can see that the problem is that there is no pod available.\n\n  ![](images/an-loyalty-level-deployment-overview.png)\n7.\tTo fix the issue, click **Actions**>**Edit Count**, set the pod number back to **1** and save the change.\n8.\tSwitch back to the App Navigator Application view and you see in a moment that the status color of stocktrader application goes from red to green and the loyalty-levels application is back up and running. The problem has been solved. \n\n### 7.\tSummary\n\nIn this lab, you have learned how to use IBM App Navigator tool to inspect your applications on-prem and in cloud. App Navigator enhances operational understanding and control through a simplified but powerful view of your applications, allows you to easily view/navigate/interacts with the applications and their components.\nTo learn more about IBM App Modernization solutions and Cloud Pak for Application capabilities, please visit [Cloud Pak for Applications](https://www.ibm.com/cloud/cloud-pak-for-applications).\n\nCongratulations! You have successfully completed the lab “App Centric Management with Application Navigator”\n","fileAbsolutePath":"/Users/yitang/Downloads/app-mod/src/pages/labs/mm0100-day2operation/index.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}
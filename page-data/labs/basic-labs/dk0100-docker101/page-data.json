{"componentChunkName":"component---src-pages-labs-basic-labs-dk-0100-docker-101-index-mdx","path":"/labs/basic-labs/dk0100-docker101/","result":{"pageContext":{"frontmatter":{"title":"Docker Introduction","description":null},"relativePagePath":"/labs/basic-labs/dk0100-docker101/index.mdx","titleType":"page","MdxNode":{"id":"ccfc2afa-0e76-52ba-b40c-a4170daf2797","children":[],"parent":"97d0d14e-cd88-5543-8e46-2edc6fe89805","internal":{"content":"---\ntitle: Docker Introduction\ndescription: \n---\nThe goal of this lab session is to provide background working with standalone Docker images and containers running an IBM WebSphere® Liberty application. You can start by learning some basic concepts on how to use Docker and how to run a containerized application.\n\n### 1. What is Docker\n\nDocker is a Linux kernel extension that provides for operating system virtualization, also known as “containerization”. Applications are packaged in Docker images and then deployed as containers. Containers are isolated from each other and bundle their own programs, libraries, applications and configuration, which can communicate with other containers. A typical example for an application would be one container with the web or application server and a second container running a database. \n\n### 2. Objective\n\nThe objectives of this lab are to help you:\n\n* learn how to build a Docker image using the Dockerfile\n*\tlearn how to create Docker containers\n\n### 3.\tPrerequisites\n\nThe following prerequisites must be completed prior to beginning this lab:\n*\tFamiliarity with basic Linux commands\n*\tHave internet access\n*\tHave a SkyTap App Mod Lab environment ready\n\n### 4.\tWhat is Already Completed\n\nA six Linux VMs App Mod environment has been provided for this lab. \n \n  ![](images/lab-vms.png)\n\n*\tThe Red Hat OpenShift Container Platform (OCP) v4.6, is installed in 5 VMs, the master1 VM, the master2 VM, the master3 VM, the dns VM and the nfs VM, with 3 master nodes and 3 compute nodes (the master nodes are serving as computer nodes as well).\n*\tThe Workstation VM is the one you will use to access and work with OCP cluster in this lab.\n  The login credentials for the Workstation VM are:\n  User ID: **ibmdemo**\n  Password: **passw0rd**\n  Note: Use the Password above in the Workstation VM Terminal for sudo in the Lab.\n*\tThe CLI commands used in this lab are listed in the **Commands.txt** file located at the **/home/ibmdemo/add-mod-labs/dk0100st** directory of the Workstation VM for you to copy and paste these commands to the terminal window during the lab.\n\n### 5.\tLab Tasks\nDuring this lab, you complete the following tasks:\n*\treview the files used in the Docker image build\n*\tbuild Docker Images\n*\tcreate Docker containers and test container applications\n\n### 6.\tExecute Lab Tasks\n#### 6.1 Log in to the Workstation VM and get started \n\n1.\tIf the VMs are not already started, start them by clicking the play button for the whole group.\n\n  ![](images/start-vms.png)\n\n\n2.\tAfter the VMs are started, click the Workstation VM icon to access it. \n\n  ![](images/access-workstation.png)\n\n  The Workstation Linux Desktop is displayed. You execute all the lab tasks on this workstation VM.\n\n3.\tIf requested to log in to the Workstation OS, use credentials: **ibmdemo**/**passw0rd**\n\n#### 6.2 Review the files used in the Docker image build\n\n1.\tOpen a terminal window by clicking its icon on the Desktop tool bar.\n \n    ![](images/terminal-icon.png)\n\n2.\tIn the terminal window, issue the following command to navigate to the **/home/ibmdemo/app-mod-labs/dk0100st** directory.\n\n  ```\n  cd /home/ibmdemo/app-mod-labs/dk0100st\n  ```\n  The output of the command is like this:\n  ```\n  ibmdemo@workstation:~/app-mod-labs/dk0100st$ \n  ```\n3. Review the lab contents in this directory using command:\n\n  ```\n  ls -l\n  ```\n  The output of the command is like this:\n  ```\n  total 20\n  -rw-rw-r-- 1 ibmdemo ibmdemo  459 Jul  7 14:45 Commands.txt\n  -rw-rw-r-- 1 ibmdemo ibmdemo  785 Jul  7 06:00 Dockerfile\n  -rw-rw-r-- 1 ibmdemo ibmdemo  316 Jul  7 06:00 server.xml\n  -rw-rw-r-- 1 ibmdemo ibmdemo 7441 Jul  7 06:00 ServletApp.war\n  ```\n  You see the following files:\n\n    * Commands.txt - the file lists all the commands used in the lab.\n    * Dockerfile - the file used to build a Docker image.\n    * Server.xml - the Liberty server configurations.\n    * ServletApp.war - the application runtime.\n4. Check the Docker version using command:\n\n  ```\n  docker version\n  ````\n  The output of the command is like this:\n  ```\n  Client:\n    Version:           18.09.6\n    API version:       1.39\n    Go version:        go1.10.8\n    Git commit:        481bc77\n    Built:             Sat May  4 02:35:57 2019\n    OS/Arch:           linux/amd64\n    Experimental:      false\n\n  Server: Docker Engine - Community Engine:\n    Version:          18.09.6\n    API version:      1.39 (minimum version 1.12)\n    Go version:       go1.10.8\n    Git commit:       481bc77\n    Built:            Sat May  4 01:59:36 2019\n    OS/Arch:          linux/amd64\n    Experimental:     false\n\n  ```\n\n5. Examine the **Dockerfile** which builds a Liberty Docker image with command:\n\n  ```\n  cat Dockerfile \n  ```  \n\n  The output of the command is like this:\n  ```\n  # (C) Copyright IBM Corporation 2015,2018.\n  #\n  # Licensed under the Apache License, Version 2.0 (the \"License\");\n  # you may not use this file except in compliance with the License.\n  # You may obtain a copy of the License at\n  #\n  #      http://www.apache.org/licenses/LICENSE-2.0\n  #\n  # Unless required by applicable law or agreed to in writing, software\n  # distributed under the License is distributed on an \"AS IS\" BASIS,\n  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  # See the License for the specific language governing permissions and\n  # limitations under the License.\n\n  FROM websphere-liberty:webProfile7\n  COPY server.xml /config/\n  COPY ServletApp.war /config/apps/\n\n  RUN server start && server stop && rm -rf /output/resources/security/ && rm -rf /output/messaging\n  ```\n\n  This file builds a Liberty Docker image with an application with the following actions:\n    *\tUse the **From** instruction to pull the **websphere-liberty-webprofile7** base image from Docker Hub. This must always be the first instruction in the Dockerfile.\n    * Use the **Copy** instruction to copy a Liberty server.xml file from the current directory to the /config directory in the image.\n    * Use the **Copy** instruction to copy an application war file from the current directory to the /config/apps directory. \n    * Use the **Run** instruction to execute the server start and stop commands.\n\n6. Examine the Liberty server.xml for this lab with command:\n\n  ```\n  cat server.xml \n  ```\n\n  The output of the command is like this:\n  ```\n  <server description=\"default servlet engine\">\n\n    <!-- Enable features -->\n    <featureManager>\n        <feature>servlet-3.1</feature>\n    </featureManager>\n\n    <httpEndpoint id=\"defaultHttpEndpoint\" host=\"*\" httpPort=\"9080\" httpsPort=\"-1\"/>      \n    <webApplication contextRoot=\"/\" location=\"ServletApp.war\" />\n\n  </server>\n\n  ```\n\n  The server.xml file:   \n    * Specifies that only the servlet-3.1 API feature is added to Liberty for this application.\n    * Exposes port 9080 for http(s) traffic  \n    * Define the contextRoot for the application in the application in the ServletApp.war file. \n\n### 6.3 Build Docker Images\n\n1.\tBuild a Liberty docker image named **simpleapp** by typing command:\n\n  ```\n  docker build . -t simpleapp\n  ```\n\n  Note: the “.” in the command indicates that a Docker image is built using the Dockerfile in the current directory.             \n\n  The output of the command is like this:\n  ```\n  Sending build context to Docker daemon   12.8kB\n  Step 1/4 : FROM websphere-liberty:webProfile7\n    ---> 4f80b39623c7\n  Step 2/4 : COPY server.xml /config/\n    ---> 630c8afcdcb5\n  Step 3/4 : COPY ServletApp.war /config/apps/\n    ---> 1d90b8bc3cfd\n  Step 4/4 : RUN server start && server stop && rm -rf /output/resources/security/ && rm -rf /output/messaging\n    ---> Running in 043249eeb32c\n\n  Starting server defaultServer.\n  Server defaultServer started with process ID 38.\n\n  Stopping server defaultServer.\n  Server defaultServer stopped.\n  Removing intermediate container 043249eeb32c\n    ---> 468df215e750\n  Successfully built 468df215e750\n  Successfully tagged simpleapp:latest\n\n  ```\n2.\tYou can obtain a list of all images in the local Docker registry using the **docker images** command. \n\n  ```\n  docker images\n  ```\n  The list of Docker images on the Workstation is displayed.\n\n\n  \n3.\tYou can use the **grep** command to filter the images listed by running command:\n\n  ```\n  docker images | grep simpleapp  \n  ```\n\n  The output of the command is like this:\n  ```\n  simpleapp                       latest                    468df215e750        2 minutes ago       419MB                                                                  latest                    468df215e750        2 minutes ago       419MB\n\n  ```\n\n#### 6.4\tCreate Docker containers and test container applications\n1.\tNow that you have an image, run it in a container by typing the following command:\n\n  ```\n  docker run --name=simpleC1 --hostname=localhost -d -p 8081:9080 simpleapp  \n  ```\n\n  The **simpleapp** container instance is created.\n  ```\n  dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031\n  ```\n\n  This starts a container named **simpleC1** and map the port **9080** in the container to port **8081** on the localhost using the image **simpleapp** which you just created.\n2.\tYou can obtain a list of all running containers using the **docker ps** command and see the container you just created.\n\n  ```\n  docker ps\n  ```\n  The output of the command is like this:\n  ```\n  CONTAINER ID        IMAGE                     COMMAND                  CREATED             STATUS                    PORTS                                                          NAMES\n  dc6da4239b4f        simpleapp                 \"/opt/ibm/helpers/ru…\"   2 minutes ago       Up 2 minutes              9443/tcp, 0.0.0.0:8081->9080/tcp                               simpleC1\n  2c162453b1bc        gitlab/gitlab-ce:latest   \"/assets/wrapper\"        18 months ago       Up 34 minutes (healthy)   0.0.0.0:24->22/tcp, 0.0.0.0:82->80/tcp, 0.0.0.0:445->443/tcp   gitlab\n\n  ```\n3.\tYou can inspect the running **simpleC1** container using command:\n\n  ```\n  docker container inspect simpleC1\n  ```\n\n  By inspecting the container, you can access detailed information about the container and get to know the details about network settings, volumes, configs, state etc.\n\n  ```\n  [\n    {\n        \"Id\": \"dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031\",\n        \"Created\": \"2021-07-09T13:05:16.638462842Z\",\n        \"Path\": \"/opt/ibm/helpers/runtime/docker-server.sh\",\n        \"Args\": [\n            \"/opt/ibm/wlp/bin/server\",\n            \"run\",\n            \"defaultServer\"\n        ],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 12222,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2021-07-09T13:05:17.204274597Z\",\n            \"FinishedAt\": \"0001-01-01T00:00:00Z\"\n        },\n        \"Image\": \"sha256:468df215e750024c4a68fab3226f2cf5f6849ce73f0f43bd7b8618606424fa0d\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031/dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031-json.log\",\n        \"Name\": \"/simpleC1\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"docker-default\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": null,\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {\n                \"9080/tcp\": [\n                    {\n                        \"HostIp\": \"\",\n                        \"HostPort\": \"8081\"\n                    }\n                ]\n            },\n            \"RestartPolicy\": {\n                \"Name\": \"no\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"shareable\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": [],\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DiskQuota\": 0,\n            \"KernelMemory\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": null,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": 0,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"MaskedPaths\": [\n                \"/proc/asound\",\n                \"/proc/acpi\",\n                \"/proc/kcore\",\n                \"/proc/keys\",\n                \"/proc/latency_stats\",\n                \"/proc/timer_list\",\n                \"/proc/timer_stats\",\n                \"/proc/sched_debug\",\n                \"/proc/scsi\",\n                \"/sys/firmware\"\n            ],\n            \"ReadonlyPaths\": [\n                \"/proc/bus\",\n                \"/proc/fs\",\n                \"/proc/irq\",\n                \"/proc/sys\",\n                \"/proc/sysrq-trigger\"\n            ]\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/var/lib/docker/overlay2/02ef0917238240791da4ae09802d486ad71e4bad5792985d617cb70d9cbd5dfe-init/diff:/var/lib/docker/overlay2/9d1c5add0ab689743ec358de91476b3a5ab256f546a0694f4290b9230c1d5bbe/diff:/var/lib/docker/overlay2/71ba4acbc7845049cc1b05874764d83443281e96b10fc49954063f1fb602f6e5/diff:/var/lib/docker/overlay2/c4c68cc0e6c08292c0e1bd90c381e7fd3d118c6f1264aea45fe3d8681324266f/diff:/var/lib/docker/overlay2/00d09f50ce874e02143658a5be141e7403739ac8c0dbeecbd4644d9024a61904/diff:/var/lib/docker/overlay2/a4dc1dbe6ac5e2c3c718a50f109ff776a96033d981dd5083ab66583ed6508323/diff:/var/lib/docker/overlay2/4007227543e98f5610d351665ff478a97dddeee92847fb926c52efae9f23b933/diff:/var/lib/docker/overlay2/6fab3e33ad1798833b4ec3b7879042b38773df4430eb8d74a4b6aa1f0dc05e36/diff:/var/lib/docker/overlay2/bc17f56e215df505a414014c15da8f560e04fce3b967d6d201c27f0012f6fb6b/diff:/var/lib/docker/overlay2/fe422fc02010e858a5b089fb647a743b49c32dfa00d046c92488ef71c8f936af/diff:/var/lib/docker/overlay2/7d9999e1d7dc8f44702f970e1334f4e799ec19593182af706fafb12e9a41960f/diff:/var/lib/docker/overlay2/101c9a2e2cad291416ca575c13b81325b51d360b1808576f1a9364d634a52d3a/diff:/var/lib/docker/overlay2/74e21212bcf657f0d8100fc073ca6e2c4910b136fde7fed5dc92f4305fec5afa/diff:/var/lib/docker/overlay2/adf15b61fcc0b2ac3047444933bbdede3eafa97728698efe021d6d7146061c6d/diff:/var/lib/docker/overlay2/3c44971e33c6938281563c8198869f0f3e89cc7642deaef015e39bb04196931f/diff:/var/lib/docker/overlay2/fbc500ce863ea7b7d83c6f8d92822c3cf9752430abfa4f74d534a47fcbe413b3/diff:/var/lib/docker/overlay2/42b9a4d42c35ebeaf95263a267265199f8a22c46e3a91c81a88f2e2fca9352d2/diff:/var/lib/docker/overlay2/6127420e2b63e2adffb528926d08c0c98c9e9f6ffc91060ca2c6f638332ec1e8/diff\",\n                \"MergedDir\": \"/var/lib/docker/overlay2/02ef0917238240791da4ae09802d486ad71e4bad5792985d617cb70d9cbd5dfe/merged\",\n                \"UpperDir\": \"/var/lib/docker/overlay2/02ef0917238240791da4ae09802d486ad71e4bad5792985d617cb70d9cbd5dfe/diff\",\n                \"WorkDir\": \"/var/lib/docker/overlay2/02ef0917238240791da4ae09802d486ad71e4bad5792985d617cb70d9cbd5dfe/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [],\n        \"Config\": {\n            \"Hostname\": \"localhost\",\n            \"Domainname\": \"\",\n            \"User\": \"1001\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"ExposedPorts\": {\n                \"9080/tcp\": {},\n                \"9443/tcp\": {}\n            },\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"PATH=/opt/ibm/wlp/bin:/opt/ibm/helpers/build:/opt/ibm/java/jre/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n                \"JAVA_VERSION=1.8.0_sr5fp41\",\n                \"JAVA_HOME=/opt/ibm/java/jre\",\n                \"IBM_JAVA_OPTIONS=-Xshareclasses:name=liberty,nonfatal,cacheDir=/output/.classCache/ -XX:+UseContainerSupport\",\n                \"LIBERTY_VERSION=19.0.0_10\",\n                \"LOG_DIR=/logs\",\n                \"WLP_OUTPUT_DIR=/opt/ibm/wlp/output\",\n                \"RANDFILE=/tmp/.rnd\"\n            ],\n            \"Cmd\": [\n                \"/opt/ibm/wlp/bin/server\",\n                \"run\",\n                \"defaultServer\"\n            ],\n            \"ArgsEscaped\": true,\n            \"Image\": \"simpleapp\",\n            \"Volumes\": null,\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": [\n                \"/opt/ibm/helpers/runtime/docker-server.sh\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {\n                \"BuildLabel\": \"cl191020191002-0300\",\n                \"ProductID\": \"fbf6a96d49214c0abc6a3bc5da6e48cd\",\n                \"ProductName\": \"WebSphere Application Server Liberty\",\n                \"ProductVersion\": \"19.0.0.10\",\n                \"org.opencontainers.image.authors\": \"Arthur De Magalhaes, Chris Potter\",\n                \"org.opencontainers.image.documentation\": \"https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/cwlp_about.html\",\n                \"org.opencontainers.image.revision\": \"cl191020191002-0300\",\n                \"org.opencontainers.image.url\": \"http://wasdev.net\",\n                \"org.opencontainers.image.vendor\": \"IBM\",\n                \"org.opencontainers.image.version\": \"19.0.0.10\"\n            }\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"5aa160931c270e5cd3912199083bef9c7173a25a5bca4e585ea6cefc98ecd254\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {\n                \"9080/tcp\": [\n                    {\n                        \"HostIp\": \"0.0.0.0\",\n                        \"HostPort\": \"8081\"\n                    }\n                ],\n                \"9443/tcp\": null\n            },\n            \"SandboxKey\": \"/var/run/docker/netns/5aa160931c27\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"252d731f797d958563af719b00d6328ae3a8e8cf658a2e2577b8ae2ea2d3327a\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"172.17.0.3\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"02:42:ac:11:00:03\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"5e52bd4a0e3726501e16f47325bc2f190f5b2752eade4ac323834d35c659f5a1\",\n                    \"EndpointID\": \"252d731f797d958563af719b00d6328ae3a8e8cf658a2e2577b8ae2ea2d3327a\",\n                    \"Gateway\": \"172.17.0.1\",\n                    \"IPAddress\": \"172.17.0.3\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:11:00:03\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n  ]\n  ```\n4. Next access the containerized appliction from the web browser. Launch the Firefox browser by clicking its icon on the Desktop tool bar.\n \n  ![](images/firefox-icon.png)\n\n5.\tEnter the address: **http://localhost:8081/Simple**.\n \n  ![](images/simpleapp-8081.png)\n\n    The **simpleapp** page is displayed.\n6.\tChange the address bar to: **http://localhost:8081/Snoop** to launch the default **Snoop** application.\n\n  ![](images/snoop-8081.png) \n7.\tScroll down the browser page and note the Request Information specifically the addresses and ports which reflect the container environment. \n\n  ![](images/snoop-8081-2.png) \n8.\tReturn to the command line and start another container by running the following command:\n\n  ```\n  docker run --name=simpleC2 --hostname=localhost -d -p 8082:9080 simpleapp  \n  ```\n  \n  Which starts a new container named **simpleC2** and map the port **9080** in the container to port **8082** on the localhost using the same image (note the use of port 8082 to avoid port conflicts)   \n\n9.\tOpen a browser tab and enter the address: **http://localhost:8082/Simple**.\n\n  ![](images/simpleapp-8082.png) \n\n    The **simpleapp** page is displayed.\n10.\tChange the address bar to: **http://localhost:8082/Snoop** to launch the deafult **Snoop** application.  \n\n  ![](images/snoop-8082.png) \n11.\tAgain, scroll down to the Request Information and note the addresses and ports which reflect the container environment, noted that while the Liberty is using port 9080 to serve the requests in each container, each container has different a different local address and remote port  \n\n  ![](images/snoop-8082-2.png) \n12.\tNow return to the terminal window and run command:\n\n  ```\n  docker ps | grep simple \n  ```\n\n  Which shows the docker container processes running for this lab (without limiting the results with “grep simple” all the docker processes would have been listed including those for the containers in this lab)    \n\t\n  ```\n  4bf60db162bc        simpleapp                 \"/opt/ibm/helpers/ru…\"   12 seconds ago      Up 11 seconds             9443/tcp, 0.0.0.0:8082->9080/tcp                               simpleC2\n  dc6da4239b4f        simpleapp                 \"/opt/ibm/helpers/ru…\"   10 minutes ago      Up 10 minutes             9443/tcp, 0.0.0.0:8081->9080/tcp                               simpleC1\n  ```\n  You now have some familiarity with docker images and containers. As you can see it’s easy to create images and run containers, at least on a small scale, but an enterprise needs to run containers at scale, route traffic to those contains and assign QOS values the containers which is where Kubernetes and Red Hat OpenShift Container Platform (OCP) come in. \n#### 6.5\tStop and delete Docker containers\n1.\tIssue **docker stop** commands to stop the two running containers **simpleC1** and **simpleC2**.\n\n  ```\n  docker stop simpleC1 simpleC2  \n  ```\n\n  ![](images/docker-stop.png) \n\n  The two containers are stopped. If you try to access the app in the web browser, you will get an error.\n  ```\n  simpleC1\n  simpleC2\n  ```\n2.\tRun the **docker rm** command to delete the two containers **simpleC1** and **simpleC2**.\n\n  ```\n  docker rm simpleC1 simpleC2  \n  ```\n  ![](images/docker-rm.png)\n\n  The two containers are deleted.\n\n  ```\n  simpleC1\n  simpleC2\n  ```\n3. Run the command **docker ps | grep simple** again, this time you will not see anything because the containers have already been deleted.\n\n  ```\n  docker ps | grep simple \n  ```\n\n### 7.\tSummary\n\nIn this lab, you have learned how to create a Docker container image and run container applications with the image. To learn more about App Mod and DevOps, please continue with the rest of the lab series.\n\n**Congratulations! You have successfully completed Docker Introduction Lab!**\n\n","type":"Mdx","contentDigest":"4c42acc178b42fe591421ae8d7a2db3e","owner":"gatsby-plugin-mdx","counter":2878},"frontmatter":{"title":"Docker Introduction","description":null},"exports":{},"rawBody":"---\ntitle: Docker Introduction\ndescription: \n---\nThe goal of this lab session is to provide background working with standalone Docker images and containers running an IBM WebSphere® Liberty application. You can start by learning some basic concepts on how to use Docker and how to run a containerized application.\n\n### 1. What is Docker\n\nDocker is a Linux kernel extension that provides for operating system virtualization, also known as “containerization”. Applications are packaged in Docker images and then deployed as containers. Containers are isolated from each other and bundle their own programs, libraries, applications and configuration, which can communicate with other containers. A typical example for an application would be one container with the web or application server and a second container running a database. \n\n### 2. Objective\n\nThe objectives of this lab are to help you:\n\n* learn how to build a Docker image using the Dockerfile\n*\tlearn how to create Docker containers\n\n### 3.\tPrerequisites\n\nThe following prerequisites must be completed prior to beginning this lab:\n*\tFamiliarity with basic Linux commands\n*\tHave internet access\n*\tHave a SkyTap App Mod Lab environment ready\n\n### 4.\tWhat is Already Completed\n\nA six Linux VMs App Mod environment has been provided for this lab. \n \n  ![](images/lab-vms.png)\n\n*\tThe Red Hat OpenShift Container Platform (OCP) v4.6, is installed in 5 VMs, the master1 VM, the master2 VM, the master3 VM, the dns VM and the nfs VM, with 3 master nodes and 3 compute nodes (the master nodes are serving as computer nodes as well).\n*\tThe Workstation VM is the one you will use to access and work with OCP cluster in this lab.\n  The login credentials for the Workstation VM are:\n  User ID: **ibmdemo**\n  Password: **passw0rd**\n  Note: Use the Password above in the Workstation VM Terminal for sudo in the Lab.\n*\tThe CLI commands used in this lab are listed in the **Commands.txt** file located at the **/home/ibmdemo/add-mod-labs/dk0100st** directory of the Workstation VM for you to copy and paste these commands to the terminal window during the lab.\n\n### 5.\tLab Tasks\nDuring this lab, you complete the following tasks:\n*\treview the files used in the Docker image build\n*\tbuild Docker Images\n*\tcreate Docker containers and test container applications\n\n### 6.\tExecute Lab Tasks\n#### 6.1 Log in to the Workstation VM and get started \n\n1.\tIf the VMs are not already started, start them by clicking the play button for the whole group.\n\n  ![](images/start-vms.png)\n\n\n2.\tAfter the VMs are started, click the Workstation VM icon to access it. \n\n  ![](images/access-workstation.png)\n\n  The Workstation Linux Desktop is displayed. You execute all the lab tasks on this workstation VM.\n\n3.\tIf requested to log in to the Workstation OS, use credentials: **ibmdemo**/**passw0rd**\n\n#### 6.2 Review the files used in the Docker image build\n\n1.\tOpen a terminal window by clicking its icon on the Desktop tool bar.\n \n    ![](images/terminal-icon.png)\n\n2.\tIn the terminal window, issue the following command to navigate to the **/home/ibmdemo/app-mod-labs/dk0100st** directory.\n\n  ```\n  cd /home/ibmdemo/app-mod-labs/dk0100st\n  ```\n  The output of the command is like this:\n  ```\n  ibmdemo@workstation:~/app-mod-labs/dk0100st$ \n  ```\n3. Review the lab contents in this directory using command:\n\n  ```\n  ls -l\n  ```\n  The output of the command is like this:\n  ```\n  total 20\n  -rw-rw-r-- 1 ibmdemo ibmdemo  459 Jul  7 14:45 Commands.txt\n  -rw-rw-r-- 1 ibmdemo ibmdemo  785 Jul  7 06:00 Dockerfile\n  -rw-rw-r-- 1 ibmdemo ibmdemo  316 Jul  7 06:00 server.xml\n  -rw-rw-r-- 1 ibmdemo ibmdemo 7441 Jul  7 06:00 ServletApp.war\n  ```\n  You see the following files:\n\n    * Commands.txt - the file lists all the commands used in the lab.\n    * Dockerfile - the file used to build a Docker image.\n    * Server.xml - the Liberty server configurations.\n    * ServletApp.war - the application runtime.\n4. Check the Docker version using command:\n\n  ```\n  docker version\n  ````\n  The output of the command is like this:\n  ```\n  Client:\n    Version:           18.09.6\n    API version:       1.39\n    Go version:        go1.10.8\n    Git commit:        481bc77\n    Built:             Sat May  4 02:35:57 2019\n    OS/Arch:           linux/amd64\n    Experimental:      false\n\n  Server: Docker Engine - Community Engine:\n    Version:          18.09.6\n    API version:      1.39 (minimum version 1.12)\n    Go version:       go1.10.8\n    Git commit:       481bc77\n    Built:            Sat May  4 01:59:36 2019\n    OS/Arch:          linux/amd64\n    Experimental:     false\n\n  ```\n\n5. Examine the **Dockerfile** which builds a Liberty Docker image with command:\n\n  ```\n  cat Dockerfile \n  ```  \n\n  The output of the command is like this:\n  ```\n  # (C) Copyright IBM Corporation 2015,2018.\n  #\n  # Licensed under the Apache License, Version 2.0 (the \"License\");\n  # you may not use this file except in compliance with the License.\n  # You may obtain a copy of the License at\n  #\n  #      http://www.apache.org/licenses/LICENSE-2.0\n  #\n  # Unless required by applicable law or agreed to in writing, software\n  # distributed under the License is distributed on an \"AS IS\" BASIS,\n  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  # See the License for the specific language governing permissions and\n  # limitations under the License.\n\n  FROM websphere-liberty:webProfile7\n  COPY server.xml /config/\n  COPY ServletApp.war /config/apps/\n\n  RUN server start && server stop && rm -rf /output/resources/security/ && rm -rf /output/messaging\n  ```\n\n  This file builds a Liberty Docker image with an application with the following actions:\n    *\tUse the **From** instruction to pull the **websphere-liberty-webprofile7** base image from Docker Hub. This must always be the first instruction in the Dockerfile.\n    * Use the **Copy** instruction to copy a Liberty server.xml file from the current directory to the /config directory in the image.\n    * Use the **Copy** instruction to copy an application war file from the current directory to the /config/apps directory. \n    * Use the **Run** instruction to execute the server start and stop commands.\n\n6. Examine the Liberty server.xml for this lab with command:\n\n  ```\n  cat server.xml \n  ```\n\n  The output of the command is like this:\n  ```\n  <server description=\"default servlet engine\">\n\n    <!-- Enable features -->\n    <featureManager>\n        <feature>servlet-3.1</feature>\n    </featureManager>\n\n    <httpEndpoint id=\"defaultHttpEndpoint\" host=\"*\" httpPort=\"9080\" httpsPort=\"-1\"/>      \n    <webApplication contextRoot=\"/\" location=\"ServletApp.war\" />\n\n  </server>\n\n  ```\n\n  The server.xml file:   \n    * Specifies that only the servlet-3.1 API feature is added to Liberty for this application.\n    * Exposes port 9080 for http(s) traffic  \n    * Define the contextRoot for the application in the application in the ServletApp.war file. \n\n### 6.3 Build Docker Images\n\n1.\tBuild a Liberty docker image named **simpleapp** by typing command:\n\n  ```\n  docker build . -t simpleapp\n  ```\n\n  Note: the “.” in the command indicates that a Docker image is built using the Dockerfile in the current directory.             \n\n  The output of the command is like this:\n  ```\n  Sending build context to Docker daemon   12.8kB\n  Step 1/4 : FROM websphere-liberty:webProfile7\n    ---> 4f80b39623c7\n  Step 2/4 : COPY server.xml /config/\n    ---> 630c8afcdcb5\n  Step 3/4 : COPY ServletApp.war /config/apps/\n    ---> 1d90b8bc3cfd\n  Step 4/4 : RUN server start && server stop && rm -rf /output/resources/security/ && rm -rf /output/messaging\n    ---> Running in 043249eeb32c\n\n  Starting server defaultServer.\n  Server defaultServer started with process ID 38.\n\n  Stopping server defaultServer.\n  Server defaultServer stopped.\n  Removing intermediate container 043249eeb32c\n    ---> 468df215e750\n  Successfully built 468df215e750\n  Successfully tagged simpleapp:latest\n\n  ```\n2.\tYou can obtain a list of all images in the local Docker registry using the **docker images** command. \n\n  ```\n  docker images\n  ```\n  The list of Docker images on the Workstation is displayed.\n\n\n  \n3.\tYou can use the **grep** command to filter the images listed by running command:\n\n  ```\n  docker images | grep simpleapp  \n  ```\n\n  The output of the command is like this:\n  ```\n  simpleapp                       latest                    468df215e750        2 minutes ago       419MB                                                                  latest                    468df215e750        2 minutes ago       419MB\n\n  ```\n\n#### 6.4\tCreate Docker containers and test container applications\n1.\tNow that you have an image, run it in a container by typing the following command:\n\n  ```\n  docker run --name=simpleC1 --hostname=localhost -d -p 8081:9080 simpleapp  \n  ```\n\n  The **simpleapp** container instance is created.\n  ```\n  dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031\n  ```\n\n  This starts a container named **simpleC1** and map the port **9080** in the container to port **8081** on the localhost using the image **simpleapp** which you just created.\n2.\tYou can obtain a list of all running containers using the **docker ps** command and see the container you just created.\n\n  ```\n  docker ps\n  ```\n  The output of the command is like this:\n  ```\n  CONTAINER ID        IMAGE                     COMMAND                  CREATED             STATUS                    PORTS                                                          NAMES\n  dc6da4239b4f        simpleapp                 \"/opt/ibm/helpers/ru…\"   2 minutes ago       Up 2 minutes              9443/tcp, 0.0.0.0:8081->9080/tcp                               simpleC1\n  2c162453b1bc        gitlab/gitlab-ce:latest   \"/assets/wrapper\"        18 months ago       Up 34 minutes (healthy)   0.0.0.0:24->22/tcp, 0.0.0.0:82->80/tcp, 0.0.0.0:445->443/tcp   gitlab\n\n  ```\n3.\tYou can inspect the running **simpleC1** container using command:\n\n  ```\n  docker container inspect simpleC1\n  ```\n\n  By inspecting the container, you can access detailed information about the container and get to know the details about network settings, volumes, configs, state etc.\n\n  ```\n  [\n    {\n        \"Id\": \"dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031\",\n        \"Created\": \"2021-07-09T13:05:16.638462842Z\",\n        \"Path\": \"/opt/ibm/helpers/runtime/docker-server.sh\",\n        \"Args\": [\n            \"/opt/ibm/wlp/bin/server\",\n            \"run\",\n            \"defaultServer\"\n        ],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 12222,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2021-07-09T13:05:17.204274597Z\",\n            \"FinishedAt\": \"0001-01-01T00:00:00Z\"\n        },\n        \"Image\": \"sha256:468df215e750024c4a68fab3226f2cf5f6849ce73f0f43bd7b8618606424fa0d\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031/dc6da4239b4fed3f56e9e498a1eba48b3effdc898675efc54740650658596031-json.log\",\n        \"Name\": \"/simpleC1\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"docker-default\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": null,\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {\n                \"9080/tcp\": [\n                    {\n                        \"HostIp\": \"\",\n                        \"HostPort\": \"8081\"\n                    }\n                ]\n            },\n            \"RestartPolicy\": {\n                \"Name\": \"no\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"shareable\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"ConsoleSize\": [\n                0,\n                0\n            ],\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": [],\n            \"BlkioDeviceReadBps\": null,\n            \"BlkioDeviceWriteBps\": null,\n            \"BlkioDeviceReadIOps\": null,\n            \"BlkioDeviceWriteIOps\": null,\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DiskQuota\": 0,\n            \"KernelMemory\": 0,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": null,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": 0,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"MaskedPaths\": [\n                \"/proc/asound\",\n                \"/proc/acpi\",\n                \"/proc/kcore\",\n                \"/proc/keys\",\n                \"/proc/latency_stats\",\n                \"/proc/timer_list\",\n                \"/proc/timer_stats\",\n                \"/proc/sched_debug\",\n                \"/proc/scsi\",\n                \"/sys/firmware\"\n            ],\n            \"ReadonlyPaths\": [\n                \"/proc/bus\",\n                \"/proc/fs\",\n                \"/proc/irq\",\n                \"/proc/sys\",\n                \"/proc/sysrq-trigger\"\n            ]\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/var/lib/docker/overlay2/02ef0917238240791da4ae09802d486ad71e4bad5792985d617cb70d9cbd5dfe-init/diff:/var/lib/docker/overlay2/9d1c5add0ab689743ec358de91476b3a5ab256f546a0694f4290b9230c1d5bbe/diff:/var/lib/docker/overlay2/71ba4acbc7845049cc1b05874764d83443281e96b10fc49954063f1fb602f6e5/diff:/var/lib/docker/overlay2/c4c68cc0e6c08292c0e1bd90c381e7fd3d118c6f1264aea45fe3d8681324266f/diff:/var/lib/docker/overlay2/00d09f50ce874e02143658a5be141e7403739ac8c0dbeecbd4644d9024a61904/diff:/var/lib/docker/overlay2/a4dc1dbe6ac5e2c3c718a50f109ff776a96033d981dd5083ab66583ed6508323/diff:/var/lib/docker/overlay2/4007227543e98f5610d351665ff478a97dddeee92847fb926c52efae9f23b933/diff:/var/lib/docker/overlay2/6fab3e33ad1798833b4ec3b7879042b38773df4430eb8d74a4b6aa1f0dc05e36/diff:/var/lib/docker/overlay2/bc17f56e215df505a414014c15da8f560e04fce3b967d6d201c27f0012f6fb6b/diff:/var/lib/docker/overlay2/fe422fc02010e858a5b089fb647a743b49c32dfa00d046c92488ef71c8f936af/diff:/var/lib/docker/overlay2/7d9999e1d7dc8f44702f970e1334f4e799ec19593182af706fafb12e9a41960f/diff:/var/lib/docker/overlay2/101c9a2e2cad291416ca575c13b81325b51d360b1808576f1a9364d634a52d3a/diff:/var/lib/docker/overlay2/74e21212bcf657f0d8100fc073ca6e2c4910b136fde7fed5dc92f4305fec5afa/diff:/var/lib/docker/overlay2/adf15b61fcc0b2ac3047444933bbdede3eafa97728698efe021d6d7146061c6d/diff:/var/lib/docker/overlay2/3c44971e33c6938281563c8198869f0f3e89cc7642deaef015e39bb04196931f/diff:/var/lib/docker/overlay2/fbc500ce863ea7b7d83c6f8d92822c3cf9752430abfa4f74d534a47fcbe413b3/diff:/var/lib/docker/overlay2/42b9a4d42c35ebeaf95263a267265199f8a22c46e3a91c81a88f2e2fca9352d2/diff:/var/lib/docker/overlay2/6127420e2b63e2adffb528926d08c0c98c9e9f6ffc91060ca2c6f638332ec1e8/diff\",\n                \"MergedDir\": \"/var/lib/docker/overlay2/02ef0917238240791da4ae09802d486ad71e4bad5792985d617cb70d9cbd5dfe/merged\",\n                \"UpperDir\": \"/var/lib/docker/overlay2/02ef0917238240791da4ae09802d486ad71e4bad5792985d617cb70d9cbd5dfe/diff\",\n                \"WorkDir\": \"/var/lib/docker/overlay2/02ef0917238240791da4ae09802d486ad71e4bad5792985d617cb70d9cbd5dfe/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [],\n        \"Config\": {\n            \"Hostname\": \"localhost\",\n            \"Domainname\": \"\",\n            \"User\": \"1001\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"ExposedPorts\": {\n                \"9080/tcp\": {},\n                \"9443/tcp\": {}\n            },\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"PATH=/opt/ibm/wlp/bin:/opt/ibm/helpers/build:/opt/ibm/java/jre/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n                \"JAVA_VERSION=1.8.0_sr5fp41\",\n                \"JAVA_HOME=/opt/ibm/java/jre\",\n                \"IBM_JAVA_OPTIONS=-Xshareclasses:name=liberty,nonfatal,cacheDir=/output/.classCache/ -XX:+UseContainerSupport\",\n                \"LIBERTY_VERSION=19.0.0_10\",\n                \"LOG_DIR=/logs\",\n                \"WLP_OUTPUT_DIR=/opt/ibm/wlp/output\",\n                \"RANDFILE=/tmp/.rnd\"\n            ],\n            \"Cmd\": [\n                \"/opt/ibm/wlp/bin/server\",\n                \"run\",\n                \"defaultServer\"\n            ],\n            \"ArgsEscaped\": true,\n            \"Image\": \"simpleapp\",\n            \"Volumes\": null,\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": [\n                \"/opt/ibm/helpers/runtime/docker-server.sh\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {\n                \"BuildLabel\": \"cl191020191002-0300\",\n                \"ProductID\": \"fbf6a96d49214c0abc6a3bc5da6e48cd\",\n                \"ProductName\": \"WebSphere Application Server Liberty\",\n                \"ProductVersion\": \"19.0.0.10\",\n                \"org.opencontainers.image.authors\": \"Arthur De Magalhaes, Chris Potter\",\n                \"org.opencontainers.image.documentation\": \"https://www.ibm.com/support/knowledgecenter/SSAW57_liberty/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/cwlp_about.html\",\n                \"org.opencontainers.image.revision\": \"cl191020191002-0300\",\n                \"org.opencontainers.image.url\": \"http://wasdev.net\",\n                \"org.opencontainers.image.vendor\": \"IBM\",\n                \"org.opencontainers.image.version\": \"19.0.0.10\"\n            }\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"5aa160931c270e5cd3912199083bef9c7173a25a5bca4e585ea6cefc98ecd254\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {\n                \"9080/tcp\": [\n                    {\n                        \"HostIp\": \"0.0.0.0\",\n                        \"HostPort\": \"8081\"\n                    }\n                ],\n                \"9443/tcp\": null\n            },\n            \"SandboxKey\": \"/var/run/docker/netns/5aa160931c27\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"252d731f797d958563af719b00d6328ae3a8e8cf658a2e2577b8ae2ea2d3327a\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"172.17.0.3\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"02:42:ac:11:00:03\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"5e52bd4a0e3726501e16f47325bc2f190f5b2752eade4ac323834d35c659f5a1\",\n                    \"EndpointID\": \"252d731f797d958563af719b00d6328ae3a8e8cf658a2e2577b8ae2ea2d3327a\",\n                    \"Gateway\": \"172.17.0.1\",\n                    \"IPAddress\": \"172.17.0.3\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:11:00:03\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n  ]\n  ```\n4. Next access the containerized appliction from the web browser. Launch the Firefox browser by clicking its icon on the Desktop tool bar.\n \n  ![](images/firefox-icon.png)\n\n5.\tEnter the address: **http://localhost:8081/Simple**.\n \n  ![](images/simpleapp-8081.png)\n\n    The **simpleapp** page is displayed.\n6.\tChange the address bar to: **http://localhost:8081/Snoop** to launch the default **Snoop** application.\n\n  ![](images/snoop-8081.png) \n7.\tScroll down the browser page and note the Request Information specifically the addresses and ports which reflect the container environment. \n\n  ![](images/snoop-8081-2.png) \n8.\tReturn to the command line and start another container by running the following command:\n\n  ```\n  docker run --name=simpleC2 --hostname=localhost -d -p 8082:9080 simpleapp  \n  ```\n  \n  Which starts a new container named **simpleC2** and map the port **9080** in the container to port **8082** on the localhost using the same image (note the use of port 8082 to avoid port conflicts)   \n\n9.\tOpen a browser tab and enter the address: **http://localhost:8082/Simple**.\n\n  ![](images/simpleapp-8082.png) \n\n    The **simpleapp** page is displayed.\n10.\tChange the address bar to: **http://localhost:8082/Snoop** to launch the deafult **Snoop** application.  \n\n  ![](images/snoop-8082.png) \n11.\tAgain, scroll down to the Request Information and note the addresses and ports which reflect the container environment, noted that while the Liberty is using port 9080 to serve the requests in each container, each container has different a different local address and remote port  \n\n  ![](images/snoop-8082-2.png) \n12.\tNow return to the terminal window and run command:\n\n  ```\n  docker ps | grep simple \n  ```\n\n  Which shows the docker container processes running for this lab (without limiting the results with “grep simple” all the docker processes would have been listed including those for the containers in this lab)    \n\t\n  ```\n  4bf60db162bc        simpleapp                 \"/opt/ibm/helpers/ru…\"   12 seconds ago      Up 11 seconds             9443/tcp, 0.0.0.0:8082->9080/tcp                               simpleC2\n  dc6da4239b4f        simpleapp                 \"/opt/ibm/helpers/ru…\"   10 minutes ago      Up 10 minutes             9443/tcp, 0.0.0.0:8081->9080/tcp                               simpleC1\n  ```\n  You now have some familiarity with docker images and containers. As you can see it’s easy to create images and run containers, at least on a small scale, but an enterprise needs to run containers at scale, route traffic to those contains and assign QOS values the containers which is where Kubernetes and Red Hat OpenShift Container Platform (OCP) come in. \n#### 6.5\tStop and delete Docker containers\n1.\tIssue **docker stop** commands to stop the two running containers **simpleC1** and **simpleC2**.\n\n  ```\n  docker stop simpleC1 simpleC2  \n  ```\n\n  ![](images/docker-stop.png) \n\n  The two containers are stopped. If you try to access the app in the web browser, you will get an error.\n  ```\n  simpleC1\n  simpleC2\n  ```\n2.\tRun the **docker rm** command to delete the two containers **simpleC1** and **simpleC2**.\n\n  ```\n  docker rm simpleC1 simpleC2  \n  ```\n  ![](images/docker-rm.png)\n\n  The two containers are deleted.\n\n  ```\n  simpleC1\n  simpleC2\n  ```\n3. Run the command **docker ps | grep simple** again, this time you will not see anything because the containers have already been deleted.\n\n  ```\n  docker ps | grep simple \n  ```\n\n### 7.\tSummary\n\nIn this lab, you have learned how to create a Docker container image and run container applications with the image. To learn more about App Mod and DevOps, please continue with the rest of the lab series.\n\n**Congratulations! You have successfully completed Docker Introduction Lab!**\n\n","fileAbsolutePath":"/Users/yitang/Downloads/app-mod/src/pages/labs/basic-labs/dk0100-docker101/index.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}